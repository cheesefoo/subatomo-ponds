<!DOCTYPE html>
<html lang="en">
<head>
    <style>body {
        opacity: 0;
    }</style>
    <meta content="width=device-width, user-scalable=no" name="viewport"/>
    <meta charset="utf-8"/>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
    <script src="localization/language.js"></script>
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css"
          integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/0.8.2/css/flag-icon.min.css" rel="stylesheet">
    <link href="./css/style.css">
    <link
            href="https://fonts.googleapis.com/css?family=Ubuntu&display=swap"
            rel="stylesheet"
    />
    <link href="/manifest.webmanifest" rel="manifest"/>
    <title text="main-1">大空スバルのスバ友池</title>
</head>
<body class="ubuntu">
<img id="loadingDuck" src="./images/loading_duck.gif"/>

<nav class="navbar sticky-top navbar-expand-lg bg-warning p-2">
    <a class="navbar-brand text-white font-weight-bold" href="#" id="menu1" style="margin-right: auto">
        <span text="main-1">Subatomo Ponds</span>
    </a>

    <div class="justify-content-end">
        <ul class="navbar-nav">
            <li class="nav-item dropdown">
                <a aria-expanded="false" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#"
                   id="navbarDropdown" role="button" text="main-5">
                    LANGUAGE
                </a>
                <ul aria-labelledby="navbarDropdown" class="dropdown-menu">
                    <li><a class="dropdown-item selectLang flag-icon flag-icon-us" href="#" lang="EN"></a>EN</li>
                    <li><a class="dropdown-item selectLang flag-icon flag-icon-jp" href="#" lang="JP"></a>JP</li>
                    <li><a class="dropdown-item selectLang flag-icon flag-icon-id" href="#" lang="ID"></a>ID</li>
                    <li><a class="dropdown-item selectLang flag-icon flag-icon-es" href="#" lang="ES"></a>ES</li>
                    <li><a class="dropdown-item selectLang flag-icon flag-icon-br" href="#" lang="PT"></a>PT</li>
                    <li><a class="dropdown-item selectLang flag-icon flag-icon-kr" href="#" lang="KR"></a>KR</li>
                    <li><a class="dropdown-item selectLang flag-icon flag-icon-nl" href="#" lang="NL"></a>NL</li>
                    <li><a class="dropdown-item selectLang flag-icon flag-icon-de" href="#" lang="DE"></a>DE</li>
                </ul>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link text-white" href="#" id="spb1" text="main-2"></a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-white" href="#" id="menu2" text="main-3"></a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-white" href="#" id="menu3" text="main-4"></a>
            </li>
        </ul>
    </div>
</nav>
<div id="screens">
    <div class="d-flex justify-content-center">

        <div class="screen" id="home">
            <div class="content">
                <img alt="logo" src="images/logo.png"/>
                <a class="nav-link text-white" href="#" id="spb2" text="main-11"></a>
            </div>
        </div>
        <div class="screen" id="about-project">
            <h1 text="main-3"></h1>
            <img alt="subatomo army" src="images/subatomo army.png"/>
            <div class="project-text">
                <span text="main-18"></span>
                <br/><br/>
                <span text="main-19"></span>
            </div>
        </div>
        <div class="screen" id="about-subaru">
            <h1 text="main-13">Oozora Subaru</h1>
            <img alt="subaru" src="images/subaru.webp"/>
            <div class="about-content">
                <p>
                    <span text="main-20"></span>
                    <br/>
                    <span text="main-21"></span>

                </p>
                <br/>
                <a href="https://www.youtube.com/channel/UCvzGlP9oQwU--Y0r9id_jnA" text="main-14"
                >Youtube channel</a
                >
            </div>
        </div>
    </div>
</div>


<script defer>
    $(function () {
        loadTranslationsJSON().then(loadTexts);
        $("#screens").show();

    });

    function loadTexts() {
        if (strings == null) {
            console.error("strings weren't loaded");
        }
        if (lang == null) {
            console.error("lang not set");
        }
        let tags = $("[text]");
        let texts = strings[lang]["Main page"];
        console.log(texts);
        [...tags].forEach(function (t) {
            let textAttr = t.getAttribute("text");
            let index = textAttr.substr(5);

            t.textContent = texts[index];
        });
    }

    $(".selectLang").on("click", function () {
        lang = $(this).attr("lang");
        console.log(lang);
        localStorage["userLang"] = lang;
        // localStorage["userLang"] = $(this).attr("lang");
        // location.reload();
        loadTexts();
        changeDropdown();

    });

    function changeDropdown() {

        let dropdown = $("#dropdown-inner");
        dropdown.removeClass();
        dropdown.addClass("flag-icon");
        let cls = "flag-icon-";
        switch (lang) {
        case "EN":
            cls += "us";
            break;

        case "PT":
            cls += "br";
            break;
        default:
            cls += lang.toLowerCase();
            break;
        }
        dropdown.addClass(cls);
    }

    function changeScreen(screen) {
        hideScreen();
        $("#screens").show();
        window.game.input.enabled = false;
        $("canvas").hide();
        $(screen).show();
    }

    function hideScreen() {
        $("#pond-ui").hide();
        $(".screen").hide();
    }


    $("#spb1,#spb2").on("click", function () {
        hideScreen();
        $("#screens").hide();
        $("canvas").show();
        window.game.input.enabled = true;
        $("#pond-ui").show();
    });
    $("#menu1").on("click", function () {
        changeScreen("#home");
    });
    $("#menu2").on("click", function () {
        changeScreen("#about-project");
    });
    $("#menu3").on("click", function () {
        changeScreen("#about-subaru");
    });

    $("body").on("click", ".navbar a", function () {
        if (!$(".navbar-toggler").hasClass("collapsed")) {
            $(".navbar-toggler").trigger("click");
        }
    });
    //});
</script>

<!--<script src="production-dependencies.bundle.js"></script>-->
<script crossorigin="anonymous"
        integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script>

<script src="main.bundle.js"></script>
<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="/__/firebase/8.6.2/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="/__/firebase/8.6.2/firebase-analytics.js"></script>

<!-- Initialize Firebase -->
<script src="/__/firebase/init.js"></script>
</body>
</html>
